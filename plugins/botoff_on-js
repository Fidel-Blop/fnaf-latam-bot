module.exports = {
  name: "onoff",
  alias: ["boton", "botoff"],
  desc: "Activa o desactiva el bot en este grupo",
  run: async (conn, m, { text, isGroup, from }) => {
    if (!isGroup) return m.reply("⚠️ Este comando solo funciona en grupos.");

    // Asegurarse de que la estructura exista
    if (!global.db.data.chats[from]) global.db.data.chats[from] = {};

    // Convertir texto a minúsculas
    const cmd = text.toLowerCase();

    if (cmd === "on") {
      global.db.data.chats[from].botBaneado = false; // activar bot
      await global.saveDatabase();
      return m.reply("✅ Bot activado en este grupo.");
    }

    if (cmd === "off") {
      global.db.data.chats[from].botBaneado = true; // desactivar bot
      await global.saveDatabase();
      return m.reply("⛔ Bot desactivado en este grupo.");
    }

    // Si no es on ni off
    return m.reply("Usa: `bot on` o `bot off`");
  }
};
